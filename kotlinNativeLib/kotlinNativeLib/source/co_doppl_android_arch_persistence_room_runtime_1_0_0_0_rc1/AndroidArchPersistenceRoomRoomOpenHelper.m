//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//

#include "AndroidArchPersistenceDbSimpleSQLiteQuery.h"
#include "AndroidArchPersistenceDbSupportSQLiteDatabase.h"
#include "AndroidArchPersistenceDbSupportSQLiteOpenHelper.h"
#include "AndroidArchPersistenceRoomDatabaseConfiguration.h"
#include "AndroidArchPersistenceRoomMigrationMigration.h"
#include "AndroidArchPersistenceRoomRoomDatabase.h"
#include "AndroidArchPersistenceRoomRoomMasterTable.h"
#include "AndroidArchPersistenceRoomRoomOpenHelper.h"
#include "AndroidDatabaseCursor.h"
#include "J2ObjC_source.h"
#include "java/lang/IllegalStateException.h"
#include "java/util/List.h"

@interface AndroidArchPersistenceRoomRoomOpenHelper () {
 @public
  AndroidArchPersistenceRoomDatabaseConfiguration *mConfiguration_;
  AndroidArchPersistenceRoomRoomOpenHelper_Delegate *mDelegate_;
  NSString *mIdentityHash_;
}

- (void)checkIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db;

- (void)updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db;

- (void)createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db;

@end

J2OBJC_FIELD_SETTER(AndroidArchPersistenceRoomRoomOpenHelper, mConfiguration_, AndroidArchPersistenceRoomDatabaseConfiguration *)
J2OBJC_FIELD_SETTER(AndroidArchPersistenceRoomRoomOpenHelper, mDelegate_, AndroidArchPersistenceRoomRoomOpenHelper_Delegate *)
J2OBJC_FIELD_SETTER(AndroidArchPersistenceRoomRoomOpenHelper, mIdentityHash_, NSString *)

__attribute__((unused)) static void AndroidArchPersistenceRoomRoomOpenHelper_checkIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(AndroidArchPersistenceRoomRoomOpenHelper *self, id<AndroidArchPersistenceDbSupportSQLiteDatabase> db);

__attribute__((unused)) static void AndroidArchPersistenceRoomRoomOpenHelper_updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(AndroidArchPersistenceRoomRoomOpenHelper *self, id<AndroidArchPersistenceDbSupportSQLiteDatabase> db);

__attribute__((unused)) static void AndroidArchPersistenceRoomRoomOpenHelper_createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase_(AndroidArchPersistenceRoomRoomOpenHelper *self, id<AndroidArchPersistenceDbSupportSQLiteDatabase> db);

@implementation AndroidArchPersistenceRoomRoomOpenHelper

- (instancetype)initWithAndroidArchPersistenceRoomDatabaseConfiguration:(AndroidArchPersistenceRoomDatabaseConfiguration * __nonnull)configuration
                  withAndroidArchPersistenceRoomRoomOpenHelper_Delegate:(AndroidArchPersistenceRoomRoomOpenHelper_Delegate * __nonnull)delegate
                                                           withNSString:(NSString * __nonnull)identityHash {
  AndroidArchPersistenceRoomRoomOpenHelper_initWithAndroidArchPersistenceRoomDatabaseConfiguration_withAndroidArchPersistenceRoomRoomOpenHelper_Delegate_withNSString_(self, configuration, delegate, identityHash);
  return self;
}

- (void)onConfigureWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db {
  [super onConfigureWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
}

- (void)onCreateWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db {
  AndroidArchPersistenceRoomRoomOpenHelper_updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
  [((AndroidArchPersistenceRoomRoomOpenHelper_Delegate *) nil_chk(mDelegate_)) createAllTablesWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
  [mDelegate_ onCreateWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
}

- (void)onUpgradeWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db
                                                           withInt:(jint)oldVersion
                                                           withInt:(jint)newVersion {
  __unused jboolean migrated = false;
  if (mConfiguration_ != nil) {
    __unused id<JavaUtilList> migrations = [((AndroidArchPersistenceRoomRoomDatabase_MigrationContainer *) nil_chk(mConfiguration_->migrationContainer_)) findMigrationPathWithInt:oldVersion withInt:newVersion];
    if (migrations != nil) {
      for (AndroidArchPersistenceRoomMigrationMigration * __strong migration in migrations) {
        [((AndroidArchPersistenceRoomMigrationMigration *) nil_chk(migration)) migrateWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
      }
      [((AndroidArchPersistenceRoomRoomOpenHelper_Delegate *) nil_chk(mDelegate_)) validateMigrationWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
      AndroidArchPersistenceRoomRoomOpenHelper_updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
      migrated = true;
    }
  }
  if (!migrated) {
    if (mConfiguration_ == nil || mConfiguration_->requireMigration_) {
      @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$I$I$", @"A migration from ", oldVersion, @" to ", newVersion, @" is necessary. Please provide a Migration in the builder or call fallbackToDestructiveMigration in the builder in which case Room will re-create all of the tables."));
    }
    [((AndroidArchPersistenceRoomRoomOpenHelper_Delegate *) nil_chk(mDelegate_)) dropAllTablesWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
    [mDelegate_ createAllTablesWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
  }
}

- (void)onDowngradeWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db
                                                             withInt:(jint)oldVersion
                                                             withInt:(jint)newVersion {
  [self onUpgradeWithAndroidArchPersistenceDbSupportSQLiteDatabase:db withInt:oldVersion withInt:newVersion];
}

- (void)onOpenWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db {
  [super onOpenWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
  AndroidArchPersistenceRoomRoomOpenHelper_checkIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
  [((AndroidArchPersistenceRoomRoomOpenHelper_Delegate *) nil_chk(mDelegate_)) onOpenWithAndroidArchPersistenceDbSupportSQLiteDatabase:db];
  JreStrongAssign(&mConfiguration_, nil);
}

- (void)checkIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db {
  AndroidArchPersistenceRoomRoomOpenHelper_checkIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
}

- (void)updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db {
  AndroidArchPersistenceRoomRoomOpenHelper_updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
}

- (void)createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db {
  AndroidArchPersistenceRoomRoomOpenHelper_createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
}

- (void)dealloc {
  RELEASE_(mConfiguration_);
  RELEASE_(mDelegate_);
  RELEASE_(mIdentityHash_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 1, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 3, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 6, 5, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 8, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 9, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 10, 2, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithAndroidArchPersistenceRoomDatabaseConfiguration:withAndroidArchPersistenceRoomRoomOpenHelper_Delegate:withNSString:);
  methods[1].selector = @selector(onConfigureWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[2].selector = @selector(onCreateWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[3].selector = @selector(onUpgradeWithAndroidArchPersistenceDbSupportSQLiteDatabase:withInt:withInt:);
  methods[4].selector = @selector(onDowngradeWithAndroidArchPersistenceDbSupportSQLiteDatabase:withInt:withInt:);
  methods[5].selector = @selector(onOpenWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[6].selector = @selector(checkIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[7].selector = @selector(updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[8].selector = @selector(createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "mConfiguration_", "LAndroidArchPersistenceRoomDatabaseConfiguration;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDelegate_", "LAndroidArchPersistenceRoomRoomOpenHelper_Delegate;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mIdentityHash_", "LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LAndroidArchPersistenceRoomDatabaseConfiguration;LAndroidArchPersistenceRoomRoomOpenHelper_Delegate;LNSString;", "onConfigure", "LAndroidArchPersistenceDbSupportSQLiteDatabase;", "onCreate", "onUpgrade", "LAndroidArchPersistenceDbSupportSQLiteDatabase;II", "onDowngrade", "onOpen", "checkIdentity", "updateIdentity", "createMasterTableIfNotExists", "LAndroidArchPersistenceRoomRoomOpenHelper_Delegate;" };
  static const J2ObjcClassInfo _AndroidArchPersistenceRoomRoomOpenHelper = { "RoomOpenHelper", "android.arch.persistence.room", ptrTable, methods, fields, 7, 0x1, 9, 3, -1, 11, -1, -1, -1 };
  return &_AndroidArchPersistenceRoomRoomOpenHelper;
}

@end

void AndroidArchPersistenceRoomRoomOpenHelper_initWithAndroidArchPersistenceRoomDatabaseConfiguration_withAndroidArchPersistenceRoomRoomOpenHelper_Delegate_withNSString_(AndroidArchPersistenceRoomRoomOpenHelper *self, AndroidArchPersistenceRoomDatabaseConfiguration *configuration, AndroidArchPersistenceRoomRoomOpenHelper_Delegate *delegate, NSString *identityHash) {
  AndroidArchPersistenceDbSupportSQLiteOpenHelper_Callback_initWithInt_(self, ((AndroidArchPersistenceRoomRoomOpenHelper_Delegate *) nil_chk(delegate))->version__);
  JreStrongAssign(&self->mConfiguration_, configuration);
  JreStrongAssign(&self->mDelegate_, delegate);
  JreStrongAssign(&self->mIdentityHash_, identityHash);
}

AndroidArchPersistenceRoomRoomOpenHelper *new_AndroidArchPersistenceRoomRoomOpenHelper_initWithAndroidArchPersistenceRoomDatabaseConfiguration_withAndroidArchPersistenceRoomRoomOpenHelper_Delegate_withNSString_(AndroidArchPersistenceRoomDatabaseConfiguration *configuration, AndroidArchPersistenceRoomRoomOpenHelper_Delegate *delegate, NSString *identityHash) {
  J2OBJC_NEW_IMPL(AndroidArchPersistenceRoomRoomOpenHelper, initWithAndroidArchPersistenceRoomDatabaseConfiguration_withAndroidArchPersistenceRoomRoomOpenHelper_Delegate_withNSString_, configuration, delegate, identityHash)
}

AndroidArchPersistenceRoomRoomOpenHelper *create_AndroidArchPersistenceRoomRoomOpenHelper_initWithAndroidArchPersistenceRoomDatabaseConfiguration_withAndroidArchPersistenceRoomRoomOpenHelper_Delegate_withNSString_(AndroidArchPersistenceRoomDatabaseConfiguration *configuration, AndroidArchPersistenceRoomRoomOpenHelper_Delegate *delegate, NSString *identityHash) {
  J2OBJC_CREATE_IMPL(AndroidArchPersistenceRoomRoomOpenHelper, initWithAndroidArchPersistenceRoomDatabaseConfiguration_withAndroidArchPersistenceRoomRoomOpenHelper_Delegate_withNSString_, configuration, delegate, identityHash)
}

void AndroidArchPersistenceRoomRoomOpenHelper_checkIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(AndroidArchPersistenceRoomRoomOpenHelper *self, id<AndroidArchPersistenceDbSupportSQLiteDatabase> db) {
  AndroidArchPersistenceRoomRoomOpenHelper_createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
  __unused NSString *identityHash = @"";
  __unused id<AndroidDatabaseCursor> cursor = [((id<AndroidArchPersistenceDbSupportSQLiteDatabase>) nil_chk(db)) queryWithAndroidArchPersistenceDbSupportSQLiteQuery:create_AndroidArchPersistenceDbSimpleSQLiteQuery_initWithNSString_(AndroidArchPersistenceRoomRoomMasterTable_READ_QUERY)];
  @try {
    if ([((id<AndroidDatabaseCursor>) nil_chk(cursor)) moveToFirst]) {
      identityHash = [cursor getStringWithInt:0];
    }
  }
  @finally {
    [cursor close];
  }
  if (![((NSString *) nil_chk(self->mIdentityHash_)) isEqual:identityHash]) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(@"Room cannot verify the data integrity. Looks like you've changed schema but forgot to update the version number. You can simply fix this by increasing the version number.");
  }
}

void AndroidArchPersistenceRoomRoomOpenHelper_updateIdentityWithAndroidArchPersistenceDbSupportSQLiteDatabase_(AndroidArchPersistenceRoomRoomOpenHelper *self, id<AndroidArchPersistenceDbSupportSQLiteDatabase> db) {
  AndroidArchPersistenceRoomRoomOpenHelper_createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase_(self, db);
  [((id<AndroidArchPersistenceDbSupportSQLiteDatabase>) nil_chk(db)) execSQLWithNSString:AndroidArchPersistenceRoomRoomMasterTable_createInsertQueryWithNSString_(self->mIdentityHash_)];
}

void AndroidArchPersistenceRoomRoomOpenHelper_createMasterTableIfNotExistsWithAndroidArchPersistenceDbSupportSQLiteDatabase_(AndroidArchPersistenceRoomRoomOpenHelper *self, id<AndroidArchPersistenceDbSupportSQLiteDatabase> db) {
  [((id<AndroidArchPersistenceDbSupportSQLiteDatabase>) nil_chk(db)) execSQLWithNSString:AndroidArchPersistenceRoomRoomMasterTable_CREATE_QUERY];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AndroidArchPersistenceRoomRoomOpenHelper)

@implementation AndroidArchPersistenceRoomRoomOpenHelper_Delegate

- (instancetype)initWithInt:(jint)version_ {
  AndroidArchPersistenceRoomRoomOpenHelper_Delegate_initWithInt_(self, version_);
  return self;
}

- (void)dropAllTablesWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)database {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)createAllTablesWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)database {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)onOpenWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)database {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)onCreateWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)database {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)validateMigrationWithAndroidArchPersistenceDbSupportSQLiteDatabase:(id<AndroidArchPersistenceDbSupportSQLiteDatabase>)db {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "V", 0x404, 1, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x404, 3, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x404, 4, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x404, 5, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x404, 6, 2, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithInt:);
  methods[1].selector = @selector(dropAllTablesWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[2].selector = @selector(createAllTablesWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[3].selector = @selector(onOpenWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[4].selector = @selector(onCreateWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  methods[5].selector = @selector(validateMigrationWithAndroidArchPersistenceDbSupportSQLiteDatabase:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "version__", "I", .constantValue.asLong = 0, 0x11, 7, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "I", "dropAllTables", "LAndroidArchPersistenceDbSupportSQLiteDatabase;", "createAllTables", "onOpen", "onCreate", "validateMigration", "version", "LAndroidArchPersistenceRoomRoomOpenHelper;" };
  static const J2ObjcClassInfo _AndroidArchPersistenceRoomRoomOpenHelper_Delegate = { "Delegate", "android.arch.persistence.room", ptrTable, methods, fields, 7, 0x409, 6, 1, 8, -1, -1, -1, -1 };
  return &_AndroidArchPersistenceRoomRoomOpenHelper_Delegate;
}

@end

void AndroidArchPersistenceRoomRoomOpenHelper_Delegate_initWithInt_(AndroidArchPersistenceRoomRoomOpenHelper_Delegate *self, jint version_) {
  NSObject_init(self);
  self->version__ = version_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AndroidArchPersistenceRoomRoomOpenHelper_Delegate)
