//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//

#include "IoReactivexInternalQueueSpscLinkedArrayQueue.h"
#include "IoReactivexInternalUtilPow2.h"
#include "J2ObjC_source.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/lang/NullPointerException.h"
#include "java/util/concurrent/atomic/AtomicLong.h"
#include "java/util/concurrent/atomic/AtomicReferenceArray.h"

@interface IoReactivexInternalQueueSpscLinkedArrayQueue ()

- (jboolean)writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)buffer
                                                                  withId:(id)e
                                                                withLong:(jlong)index
                                                                 withInt:(jint)offset;

- (void)resizeWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)oldBuffer
                                                      withLong:(jlong)currIndex
                                                       withInt:(jint)offset
                                                        withId:(id)e
                                                      withLong:(jlong)mask;

- (void)soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)curr
              withJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)next;

- (JavaUtilConcurrentAtomicAtomicReferenceArray *)lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)curr
                                                                                                                withInt:(jint)nextIndex;

- (id)newBufferPollWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)nextBuffer
                                                           withLong:(jlong)index
                                                            withInt:(jint)mask OBJC_METHOD_FAMILY_NONE;

- (id)newBufferPeekWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)nextBuffer
                                                           withLong:(jlong)index
                                                            withInt:(jint)mask OBJC_METHOD_FAMILY_NONE;

- (void)adjustLookAheadStepWithInt:(jint)capacity;

- (jlong)lvProducerIndex;

- (jlong)lvConsumerIndex;

- (jlong)lpProducerIndex;

- (jlong)lpConsumerIndex;

- (void)soProducerIndexWithLong:(jlong)v;

- (void)soConsumerIndexWithLong:(jlong)v;

+ (jint)calcWrappedOffsetWithLong:(jlong)index
                          withInt:(jint)mask;

+ (jint)calcDirectOffsetWithInt:(jint)index;

+ (void)soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)buffer
                                                          withInt:(jint)offset
                                                           withId:(id)e;

+ (id)lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)buffer
                                                        withInt:(jint)offset;

@end

inline id IoReactivexInternalQueueSpscLinkedArrayQueue_get_HAS_NEXT();
static id IoReactivexInternalQueueSpscLinkedArrayQueue_HAS_NEXT;
J2OBJC_STATIC_FIELD_OBJ_FINAL(IoReactivexInternalQueueSpscLinkedArrayQueue, HAS_NEXT, id)

__attribute__((unused)) static jboolean IoReactivexInternalQueueSpscLinkedArrayQueue_writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray_withId_withLong_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *buffer, id e, jlong index, jint offset);

__attribute__((unused)) static void IoReactivexInternalQueueSpscLinkedArrayQueue_resizeWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_withId_withLong_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *oldBuffer, jlong currIndex, jint offset, id e, jlong mask);

__attribute__((unused)) static void IoReactivexInternalQueueSpscLinkedArrayQueue_soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray_withJavaUtilConcurrentAtomicAtomicReferenceArray_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *curr, JavaUtilConcurrentAtomicAtomicReferenceArray *next);

__attribute__((unused)) static JavaUtilConcurrentAtomicAtomicReferenceArray *IoReactivexInternalQueueSpscLinkedArrayQueue_lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *curr, jint nextIndex);

__attribute__((unused)) static id IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPollWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *nextBuffer, jlong index, jint mask);

__attribute__((unused)) static id IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPeekWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *nextBuffer, jlong index, jint mask);

__attribute__((unused)) static void IoReactivexInternalQueueSpscLinkedArrayQueue_adjustLookAheadStepWithInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, jint capacity);

__attribute__((unused)) static jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lvProducerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self);

__attribute__((unused)) static jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lvConsumerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self);

__attribute__((unused)) static jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lpProducerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self);

__attribute__((unused)) static jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lpConsumerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self);

__attribute__((unused)) static void IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, jlong v);

__attribute__((unused)) static void IoReactivexInternalQueueSpscLinkedArrayQueue_soConsumerIndexWithLong_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, jlong v);

__attribute__((unused)) static jint IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(jlong index, jint mask);

__attribute__((unused)) static jint IoReactivexInternalQueueSpscLinkedArrayQueue_calcDirectOffsetWithInt_(jint index);

__attribute__((unused)) static void IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(JavaUtilConcurrentAtomicAtomicReferenceArray *buffer, jint offset, id e);

__attribute__((unused)) static id IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(JavaUtilConcurrentAtomicAtomicReferenceArray *buffer, jint offset);

J2OBJC_INITIALIZED_DEFN(IoReactivexInternalQueueSpscLinkedArrayQueue)

jint IoReactivexInternalQueueSpscLinkedArrayQueue_MAX_LOOK_AHEAD_STEP;

@implementation IoReactivexInternalQueueSpscLinkedArrayQueue

+ (jint)MAX_LOOK_AHEAD_STEP {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_MAX_LOOK_AHEAD_STEP;
}

- (instancetype)initWithInt:(jint)bufferSize {
  IoReactivexInternalQueueSpscLinkedArrayQueue_initWithInt_(self, bufferSize);
  return self;
}

- (jboolean)offerWithId:(id)e {
  if (nil == e) {
    @throw create_JavaLangNullPointerException_initWithNSString_(@"Null is not a valid element");
  }
  JavaUtilConcurrentAtomicAtomicReferenceArray *buffer = producerBuffer_;
  jlong index = IoReactivexInternalQueueSpscLinkedArrayQueue_lpProducerIndex(self);
  jint mask = producerMask_;
  jint offset = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index, mask);
  if (index < producerLookAhead_) {
    return IoReactivexInternalQueueSpscLinkedArrayQueue_writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray_withId_withLong_withInt_(self, buffer, e, index, offset);
  }
  else {
    jint lookAheadStep = producerLookAheadStep_;
    jint lookAheadElementOffset = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index + lookAheadStep, mask);
    if (nil == IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(buffer, lookAheadElementOffset)) {
      producerLookAhead_ = index + lookAheadStep - 1;
      return IoReactivexInternalQueueSpscLinkedArrayQueue_writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray_withId_withLong_withInt_(self, buffer, e, index, offset);
    }
    else if (nil == IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(buffer, IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index + 1, mask))) {
      return IoReactivexInternalQueueSpscLinkedArrayQueue_writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray_withId_withLong_withInt_(self, buffer, e, index, offset);
    }
    else {
      IoReactivexInternalQueueSpscLinkedArrayQueue_resizeWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_withId_withLong_(self, buffer, index, offset, e, mask);
      return true;
    }
  }
}

- (jboolean)writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)buffer
                                                                  withId:(id)e
                                                                withLong:(jlong)index
                                                                 withInt:(jint)offset {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray_withId_withLong_withInt_(self, buffer, e, index, offset);
}

- (void)resizeWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)oldBuffer
                                                      withLong:(jlong)currIndex
                                                       withInt:(jint)offset
                                                        withId:(id)e
                                                      withLong:(jlong)mask {
  IoReactivexInternalQueueSpscLinkedArrayQueue_resizeWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_withId_withLong_(self, oldBuffer, currIndex, offset, e, mask);
}

- (void)soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)curr
              withJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)next {
  IoReactivexInternalQueueSpscLinkedArrayQueue_soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray_withJavaUtilConcurrentAtomicAtomicReferenceArray_(self, curr, next);
}

- (JavaUtilConcurrentAtomicAtomicReferenceArray *)lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)curr
                                                                                                                withInt:(jint)nextIndex {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(self, curr, nextIndex);
}

- (id __nullable)poll {
  JavaUtilConcurrentAtomicAtomicReferenceArray *buffer = consumerBuffer_;
  jlong index = IoReactivexInternalQueueSpscLinkedArrayQueue_lpConsumerIndex(self);
  jint mask = consumerMask_;
  jint offset = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index, mask);
  id e = IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(buffer, offset);
  jboolean isNextBuffer = e == IoReactivexInternalQueueSpscLinkedArrayQueue_HAS_NEXT;
  if (nil != e && !isNextBuffer) {
    IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(buffer, offset, nil);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soConsumerIndexWithLong_(self, index + 1);
    return e;
  }
  else if (isNextBuffer) {
    return IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPollWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(self, IoReactivexInternalQueueSpscLinkedArrayQueue_lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(self, buffer, mask + 1), index, mask);
  }
  return nil;
}

- (id)newBufferPollWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)nextBuffer
                                                           withLong:(jlong)index
                                                            withInt:(jint)mask {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPollWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(self, nextBuffer, index, mask);
}

- (id)peek {
  JavaUtilConcurrentAtomicAtomicReferenceArray *buffer = consumerBuffer_;
  jlong index = IoReactivexInternalQueueSpscLinkedArrayQueue_lpConsumerIndex(self);
  jint mask = consumerMask_;
  jint offset = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index, mask);
  id e = IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(buffer, offset);
  if (e == IoReactivexInternalQueueSpscLinkedArrayQueue_HAS_NEXT) {
    return IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPeekWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(self, IoReactivexInternalQueueSpscLinkedArrayQueue_lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(self, buffer, mask + 1), index, mask);
  }
  return e;
}

- (id)newBufferPeekWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)nextBuffer
                                                           withLong:(jlong)index
                                                            withInt:(jint)mask {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPeekWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(self, nextBuffer, index, mask);
}

- (void)clear {
  while ([self poll] != nil || ![self isEmpty]) {
  }
}

- (jint)size {
  jlong after = IoReactivexInternalQueueSpscLinkedArrayQueue_lvConsumerIndex(self);
  while (true) {
    jlong before = after;
    jlong currentProducerIndex = IoReactivexInternalQueueSpscLinkedArrayQueue_lvProducerIndex(self);
    after = IoReactivexInternalQueueSpscLinkedArrayQueue_lvConsumerIndex(self);
    if (before == after) {
      return (jint) (currentProducerIndex - after);
    }
  }
}

- (jboolean)isEmpty {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lvProducerIndex(self) == IoReactivexInternalQueueSpscLinkedArrayQueue_lvConsumerIndex(self);
}

- (void)adjustLookAheadStepWithInt:(jint)capacity {
  IoReactivexInternalQueueSpscLinkedArrayQueue_adjustLookAheadStepWithInt_(self, capacity);
}

- (jlong)lvProducerIndex {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lvProducerIndex(self);
}

- (jlong)lvConsumerIndex {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lvConsumerIndex(self);
}

- (jlong)lpProducerIndex {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lpProducerIndex(self);
}

- (jlong)lpConsumerIndex {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lpConsumerIndex(self);
}

- (void)soProducerIndexWithLong:(jlong)v {
  IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(self, v);
}

- (void)soConsumerIndexWithLong:(jlong)v {
  IoReactivexInternalQueueSpscLinkedArrayQueue_soConsumerIndexWithLong_(self, v);
}

+ (jint)calcWrappedOffsetWithLong:(jlong)index
                          withInt:(jint)mask {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index, mask);
}

+ (jint)calcDirectOffsetWithInt:(jint)index {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_calcDirectOffsetWithInt_(index);
}

+ (void)soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)buffer
                                                          withInt:(jint)offset
                                                           withId:(id)e {
  IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(buffer, offset, e);
}

+ (id)lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray:(JavaUtilConcurrentAtomicAtomicReferenceArray *)buffer
                                                        withInt:(jint)offset {
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(buffer, offset);
}

- (jboolean)offerWithId:(id)first
                 withId:(id)second {
  JavaUtilConcurrentAtomicAtomicReferenceArray *buffer = producerBuffer_;
  jlong p = IoReactivexInternalQueueSpscLinkedArrayQueue_lvProducerIndex(self);
  jint m = producerMask_;
  jint pi = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(p + 2, m);
  if (nil == IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(buffer, pi)) {
    pi = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(p, m);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(buffer, pi + 1, second);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(buffer, pi, first);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(self, p + 2);
  }
  else {
    jint capacity = [((JavaUtilConcurrentAtomicAtomicReferenceArray *) nil_chk(buffer)) length];
    JavaUtilConcurrentAtomicAtomicReferenceArray *newBuffer = create_JavaUtilConcurrentAtomicAtomicReferenceArray_initWithInt_(capacity);
    JreStrongAssign(&producerBuffer_, newBuffer);
    pi = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(p, m);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(newBuffer, pi + 1, second);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(newBuffer, pi, first);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray_withJavaUtilConcurrentAtomicAtomicReferenceArray_(self, buffer, newBuffer);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(buffer, pi, IoReactivexInternalQueueSpscLinkedArrayQueue_HAS_NEXT);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(self, p + 2);
  }
  return true;
}

- (void)dealloc {
  RELEASE_(producerIndex_);
  RELEASE_(producerBuffer_);
  RELEASE_(consumerBuffer_);
  RELEASE_(consumerIndex_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, 1, 2, -1, 3, -1, -1 },
    { NULL, "Z", 0x2, 4, 5, -1, 6, -1, -1 },
    { NULL, "V", 0x2, 7, 8, -1, 9, -1, -1 },
    { NULL, "V", 0x2, 10, 11, -1, 12, -1, -1 },
    { NULL, "LJavaUtilConcurrentAtomicAtomicReferenceArray;", 0x2, 13, 14, -1, 15, -1, -1 },
    { NULL, "LNSObject;", 0x1, -1, -1, -1, 16, -1, -1 },
    { NULL, "LNSObject;", 0x2, 17, 18, -1, 19, -1, -1 },
    { NULL, "LNSObject;", 0x1, -1, -1, -1, 16, -1, -1 },
    { NULL, "LNSObject;", 0x2, 20, 18, -1, 19, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 21, 0, -1, -1, -1, -1 },
    { NULL, "J", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "J", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "J", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "J", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 22, 23, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 24, 23, -1, -1, -1, -1 },
    { NULL, "I", 0xa, 25, 26, -1, -1, -1, -1 },
    { NULL, "I", 0xa, 27, 0, -1, -1, -1, -1 },
    { NULL, "V", 0xa, 28, 29, -1, 30, -1, -1 },
    { NULL, "LNSObject;", 0xa, 31, 14, -1, 32, -1, -1 },
    { NULL, "Z", 0x1, 1, 33, -1, 34, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithInt:);
  methods[1].selector = @selector(offerWithId:);
  methods[2].selector = @selector(writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray:withId:withLong:withInt:);
  methods[3].selector = @selector(resizeWithJavaUtilConcurrentAtomicAtomicReferenceArray:withLong:withInt:withId:withLong:);
  methods[4].selector = @selector(soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray:withJavaUtilConcurrentAtomicAtomicReferenceArray:);
  methods[5].selector = @selector(lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray:withInt:);
  methods[6].selector = @selector(poll);
  methods[7].selector = @selector(newBufferPollWithJavaUtilConcurrentAtomicAtomicReferenceArray:withLong:withInt:);
  methods[8].selector = @selector(peek);
  methods[9].selector = @selector(newBufferPeekWithJavaUtilConcurrentAtomicAtomicReferenceArray:withLong:withInt:);
  methods[10].selector = @selector(clear);
  methods[11].selector = @selector(size);
  methods[12].selector = @selector(isEmpty);
  methods[13].selector = @selector(adjustLookAheadStepWithInt:);
  methods[14].selector = @selector(lvProducerIndex);
  methods[15].selector = @selector(lvConsumerIndex);
  methods[16].selector = @selector(lpProducerIndex);
  methods[17].selector = @selector(lpConsumerIndex);
  methods[18].selector = @selector(soProducerIndexWithLong:);
  methods[19].selector = @selector(soConsumerIndexWithLong:);
  methods[20].selector = @selector(calcWrappedOffsetWithLong:withInt:);
  methods[21].selector = @selector(calcDirectOffsetWithInt:);
  methods[22].selector = @selector(soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray:withInt:withId:);
  methods[23].selector = @selector(lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray:withInt:);
  methods[24].selector = @selector(offerWithId:withId:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "MAX_LOOK_AHEAD_STEP", "I", .constantValue.asLong = 0, 0x18, -1, 35, -1, -1 },
    { "producerIndex_", "LJavaUtilConcurrentAtomicAtomicLong;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "producerLookAheadStep_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "producerLookAhead_", "J", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "producerMask_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "producerBuffer_", "LJavaUtilConcurrentAtomicAtomicReferenceArray;", .constantValue.asLong = 0, 0x0, -1, -1, 36, -1 },
    { "consumerMask_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "consumerBuffer_", "LJavaUtilConcurrentAtomicAtomicReferenceArray;", .constantValue.asLong = 0, 0x0, -1, -1, 36, -1 },
    { "consumerIndex_", "LJavaUtilConcurrentAtomicAtomicLong;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "HAS_NEXT", "LNSObject;", .constantValue.asLong = 0, 0x1a, -1, 37, -1, -1 },
  };
  static const void *ptrTable[] = { "I", "offer", "LNSObject;", "(TT;)Z", "writeToQueue", "LJavaUtilConcurrentAtomicAtomicReferenceArray;LNSObject;JI", "(Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;TT;JI)Z", "resize", "LJavaUtilConcurrentAtomicAtomicReferenceArray;JILNSObject;J", "(Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;JITT;J)V", "soNext", "LJavaUtilConcurrentAtomicAtomicReferenceArray;LJavaUtilConcurrentAtomicAtomicReferenceArray;", "(Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;)V", "lvNextBufferAndUnlink", "LJavaUtilConcurrentAtomicAtomicReferenceArray;I", "(Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;I)Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;", "()TT;", "newBufferPoll", "LJavaUtilConcurrentAtomicAtomicReferenceArray;JI", "(Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;JI)TT;", "newBufferPeek", "adjustLookAheadStep", "soProducerIndex", "J", "soConsumerIndex", "calcWrappedOffset", "JI", "calcDirectOffset", "soElement", "LJavaUtilConcurrentAtomicAtomicReferenceArray;ILNSObject;", "(Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;ILjava/lang/Object;)V", "lvElement", "<E:Ljava/lang/Object;>(Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;I)Ljava/lang/Object;", "LNSObject;LNSObject;", "(TT;TT;)Z", &IoReactivexInternalQueueSpscLinkedArrayQueue_MAX_LOOK_AHEAD_STEP, "Ljava/util/concurrent/atomic/AtomicReferenceArray<Ljava/lang/Object;>;", &IoReactivexInternalQueueSpscLinkedArrayQueue_HAS_NEXT, "<T:Ljava/lang/Object;>Ljava/lang/Object;Lio/reactivex/internal/fuseable/SimplePlainQueue<TT;>;" };
  static const J2ObjcClassInfo _IoReactivexInternalQueueSpscLinkedArrayQueue = { "SpscLinkedArrayQueue", "io.reactivex.internal.queue", ptrTable, methods, fields, 7, 0x11, 25, 10, -1, -1, -1, 38, -1 };
  return &_IoReactivexInternalQueueSpscLinkedArrayQueue;
}

+ (void)initialize {
  if (self == [IoReactivexInternalQueueSpscLinkedArrayQueue class]) {
    IoReactivexInternalQueueSpscLinkedArrayQueue_MAX_LOOK_AHEAD_STEP = [((JavaLangInteger *) nil_chk(JavaLangInteger_getIntegerWithNSString_withInt_(@"jctools.spsc.max.lookahead.step", 4096))) intValue];
    JreStrongAssignAndConsume(&IoReactivexInternalQueueSpscLinkedArrayQueue_HAS_NEXT, new_NSObject_init());
    J2OBJC_SET_INITIALIZED(IoReactivexInternalQueueSpscLinkedArrayQueue)
  }
}

@end

void IoReactivexInternalQueueSpscLinkedArrayQueue_initWithInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, jint bufferSize) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->producerIndex_, new_JavaUtilConcurrentAtomicAtomicLong_init());
  JreStrongAssignAndConsume(&self->consumerIndex_, new_JavaUtilConcurrentAtomicAtomicLong_init());
  jint p2capacity = IoReactivexInternalUtilPow2_roundToPowerOfTwoWithInt_(JavaLangMath_maxWithInt_withInt_(8, bufferSize));
  jint mask = p2capacity - 1;
  JavaUtilConcurrentAtomicAtomicReferenceArray *buffer = create_JavaUtilConcurrentAtomicAtomicReferenceArray_initWithInt_(p2capacity + 1);
  JreStrongAssign(&self->producerBuffer_, buffer);
  self->producerMask_ = mask;
  IoReactivexInternalQueueSpscLinkedArrayQueue_adjustLookAheadStepWithInt_(self, p2capacity);
  JreStrongAssign(&self->consumerBuffer_, buffer);
  self->consumerMask_ = mask;
  self->producerLookAhead_ = mask - 1;
  IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(self, 0LL);
}

IoReactivexInternalQueueSpscLinkedArrayQueue *new_IoReactivexInternalQueueSpscLinkedArrayQueue_initWithInt_(jint bufferSize) {
  J2OBJC_NEW_IMPL(IoReactivexInternalQueueSpscLinkedArrayQueue, initWithInt_, bufferSize)
}

IoReactivexInternalQueueSpscLinkedArrayQueue *create_IoReactivexInternalQueueSpscLinkedArrayQueue_initWithInt_(jint bufferSize) {
  J2OBJC_CREATE_IMPL(IoReactivexInternalQueueSpscLinkedArrayQueue, initWithInt_, bufferSize)
}

jboolean IoReactivexInternalQueueSpscLinkedArrayQueue_writeToQueueWithJavaUtilConcurrentAtomicAtomicReferenceArray_withId_withLong_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *buffer, id e, jlong index, jint offset) {
  IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(buffer, offset, e);
  IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(self, index + 1);
  return true;
}

void IoReactivexInternalQueueSpscLinkedArrayQueue_resizeWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_withId_withLong_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *oldBuffer, jlong currIndex, jint offset, id e, jlong mask) {
  jint capacity = [((JavaUtilConcurrentAtomicAtomicReferenceArray *) nil_chk(oldBuffer)) length];
  JavaUtilConcurrentAtomicAtomicReferenceArray *newBuffer = create_JavaUtilConcurrentAtomicAtomicReferenceArray_initWithInt_(capacity);
  JreStrongAssign(&self->producerBuffer_, newBuffer);
  self->producerLookAhead_ = currIndex + mask - 1;
  IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(newBuffer, offset, e);
  IoReactivexInternalQueueSpscLinkedArrayQueue_soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray_withJavaUtilConcurrentAtomicAtomicReferenceArray_(self, oldBuffer, newBuffer);
  IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(oldBuffer, offset, IoReactivexInternalQueueSpscLinkedArrayQueue_HAS_NEXT);
  IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(self, currIndex + 1);
}

void IoReactivexInternalQueueSpscLinkedArrayQueue_soNextWithJavaUtilConcurrentAtomicAtomicReferenceArray_withJavaUtilConcurrentAtomicAtomicReferenceArray_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *curr, JavaUtilConcurrentAtomicAtomicReferenceArray *next) {
  IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(curr, IoReactivexInternalQueueSpscLinkedArrayQueue_calcDirectOffsetWithInt_([((JavaUtilConcurrentAtomicAtomicReferenceArray *) nil_chk(curr)) length] - 1), next);
}

JavaUtilConcurrentAtomicAtomicReferenceArray *IoReactivexInternalQueueSpscLinkedArrayQueue_lvNextBufferAndUnlinkWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *curr, jint nextIndex) {
  jint nextOffset = IoReactivexInternalQueueSpscLinkedArrayQueue_calcDirectOffsetWithInt_(nextIndex);
  JavaUtilConcurrentAtomicAtomicReferenceArray *nextBuffer = (JavaUtilConcurrentAtomicAtomicReferenceArray *) cast_chk(IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(curr, nextOffset), [JavaUtilConcurrentAtomicAtomicReferenceArray class]);
  IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(curr, nextOffset, nil);
  return nextBuffer;
}

id IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPollWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *nextBuffer, jlong index, jint mask) {
  JreStrongAssign(&self->consumerBuffer_, nextBuffer);
  jint offsetInNew = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index, mask);
  id n = IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(nextBuffer, offsetInNew);
  if (nil != n) {
    IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(nextBuffer, offsetInNew, nil);
    IoReactivexInternalQueueSpscLinkedArrayQueue_soConsumerIndexWithLong_(self, index + 1);
  }
  return n;
}

id IoReactivexInternalQueueSpscLinkedArrayQueue_newBufferPeekWithJavaUtilConcurrentAtomicAtomicReferenceArray_withLong_withInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, JavaUtilConcurrentAtomicAtomicReferenceArray *nextBuffer, jlong index, jint mask) {
  JreStrongAssign(&self->consumerBuffer_, nextBuffer);
  jint offsetInNew = IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(index, mask);
  return IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(nextBuffer, offsetInNew);
}

void IoReactivexInternalQueueSpscLinkedArrayQueue_adjustLookAheadStepWithInt_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, jint capacity) {
  self->producerLookAheadStep_ = JavaLangMath_minWithInt_withInt_(capacity / 4, IoReactivexInternalQueueSpscLinkedArrayQueue_MAX_LOOK_AHEAD_STEP);
}

jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lvProducerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self) {
  return [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(self->producerIndex_)) get];
}

jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lvConsumerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self) {
  return [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(self->consumerIndex_)) get];
}

jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lpProducerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self) {
  return [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(self->producerIndex_)) get];
}

jlong IoReactivexInternalQueueSpscLinkedArrayQueue_lpConsumerIndex(IoReactivexInternalQueueSpscLinkedArrayQueue *self) {
  return [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(self->consumerIndex_)) get];
}

void IoReactivexInternalQueueSpscLinkedArrayQueue_soProducerIndexWithLong_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, jlong v) {
  [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(self->producerIndex_)) lazySetWithLong:v];
}

void IoReactivexInternalQueueSpscLinkedArrayQueue_soConsumerIndexWithLong_(IoReactivexInternalQueueSpscLinkedArrayQueue *self, jlong v) {
  [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(self->consumerIndex_)) lazySetWithLong:v];
}

jint IoReactivexInternalQueueSpscLinkedArrayQueue_calcWrappedOffsetWithLong_withInt_(jlong index, jint mask) {
  IoReactivexInternalQueueSpscLinkedArrayQueue_initialize();
  return IoReactivexInternalQueueSpscLinkedArrayQueue_calcDirectOffsetWithInt_((jint) index & mask);
}

jint IoReactivexInternalQueueSpscLinkedArrayQueue_calcDirectOffsetWithInt_(jint index) {
  IoReactivexInternalQueueSpscLinkedArrayQueue_initialize();
  return index;
}

void IoReactivexInternalQueueSpscLinkedArrayQueue_soElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_withId_(JavaUtilConcurrentAtomicAtomicReferenceArray *buffer, jint offset, id e) {
  IoReactivexInternalQueueSpscLinkedArrayQueue_initialize();
  [((JavaUtilConcurrentAtomicAtomicReferenceArray *) nil_chk(buffer)) lazySetWithInt:offset withId:e];
}

id IoReactivexInternalQueueSpscLinkedArrayQueue_lvElementWithJavaUtilConcurrentAtomicAtomicReferenceArray_withInt_(JavaUtilConcurrentAtomicAtomicReferenceArray *buffer, jint offset) {
  IoReactivexInternalQueueSpscLinkedArrayQueue_initialize();
  return [((JavaUtilConcurrentAtomicAtomicReferenceArray *) nil_chk(buffer)) getWithInt:offset];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(IoReactivexInternalQueueSpscLinkedArrayQueue)
