//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel-doppl/Squeaky-doppl/core/src/main/java/co/touchlab/squeaky/dao/DaoHelper.java
//

#include "CoTouchlabSqueakyDaoDao.h"
#include "CoTouchlabSqueakyDaoDaoHelper.h"
#include "CoTouchlabSqueakyDaoSqueakyContext.h"
#include "CoTouchlabSqueakyFieldFieldType.h"
#include "CoTouchlabSqueakyTableGeneratedTableMapper.h"
#include "CoTouchlabSqueakyTableTableInfo.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/RuntimeException.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"

@interface CoTouchlabSqueakyDaoDaoHelper ()

+ (IOSObjectArray *)fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext:(CoTouchlabSqueakyDaoSqueakyContext *)squeakyContext
                                            withCoTouchlabSqueakyFieldFieldType:(CoTouchlabSqueakyFieldFieldType *)parentType
                                                                        withInt:(jint)count;

@end

__attribute__((unused)) static IOSObjectArray *CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldType_withInt_(CoTouchlabSqueakyDaoSqueakyContext *squeakyContext, CoTouchlabSqueakyFieldFieldType *parentType, jint count);

@implementation CoTouchlabSqueakyDaoDaoHelper

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  CoTouchlabSqueakyDaoDaoHelper_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (IOSObjectArray *)refreshWithNSString:(NSString *)refreshTree {
  return CoTouchlabSqueakyDaoDaoHelper_refreshWithNSString_(refreshTree);
}

+ (CoTouchlabSqueakyDaoDaoHelper_ValBuilder *)vals {
  return CoTouchlabSqueakyDaoDaoHelper_vals();
}

+ (CoTouchlabSqueakyDaoDao_ForeignRefresh *)findRefreshWithCoTouchlabSqueakyDaoDao_ForeignRefreshArray:(IOSObjectArray *)foreignRefreshs
                                                                                          withNSString:(NSString *)fieldName {
  return CoTouchlabSqueakyDaoDaoHelper_findRefreshWithCoTouchlabSqueakyDaoDao_ForeignRefreshArray_withNSString_(foreignRefreshs, fieldName);
}

+ (IOSObjectArray *)fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext:(CoTouchlabSqueakyDaoSqueakyContext *)squeakyContext
                                                                   withIOSClass:(IOSClass *)type
                                                                        withInt:(jint)count {
  return CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withIOSClass_withInt_(squeakyContext, type, count);
}

+ (IOSObjectArray *)fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext:(CoTouchlabSqueakyDaoSqueakyContext *)squeakyContext
                                       withCoTouchlabSqueakyFieldFieldTypeArray:(IOSObjectArray *)fieldTypes
                                                                        withInt:(jint)count {
  return CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldTypeArray_withInt_(squeakyContext, fieldTypes, count);
}

+ (IOSObjectArray *)fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext:(CoTouchlabSqueakyDaoSqueakyContext *)squeakyContext
                                            withCoTouchlabSqueakyFieldFieldType:(CoTouchlabSqueakyFieldFieldType *)parentType
                                                                        withInt:(jint)count {
  return CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldType_withInt_(squeakyContext, parentType, count);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "[LCoTouchlabSqueakyDaoDao_ForeignRefresh;", 0x9, 0, 1, -1, -1, -1, -1 },
    { NULL, "LCoTouchlabSqueakyDaoDaoHelper_ValBuilder;", 0x9, -1, -1, -1, -1, -1, -1 },
    { NULL, "LCoTouchlabSqueakyDaoDao_ForeignRefresh;", 0x9, 2, 3, -1, -1, -1, -1 },
    { NULL, "[LCoTouchlabSqueakyDaoDao_ForeignRefresh;", 0x9, 4, 5, 6, -1, -1, -1 },
    { NULL, "[LCoTouchlabSqueakyDaoDao_ForeignRefresh;", 0x9, 4, 7, 6, -1, -1, -1 },
    { NULL, "[LCoTouchlabSqueakyDaoDao_ForeignRefresh;", 0xa, 4, 8, 6, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(refreshWithNSString:);
  methods[2].selector = @selector(vals);
  methods[3].selector = @selector(findRefreshWithCoTouchlabSqueakyDaoDao_ForeignRefreshArray:withNSString:);
  methods[4].selector = @selector(fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext:withIOSClass:withInt:);
  methods[5].selector = @selector(fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext:withCoTouchlabSqueakyFieldFieldTypeArray:withInt:);
  methods[6].selector = @selector(fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext:withCoTouchlabSqueakyFieldFieldType:withInt:);
  #pragma clang diagnostic pop
  static const void *ptrTable[] = { "refresh", "LNSString;", "findRefresh", "[LCoTouchlabSqueakyDaoDao_ForeignRefresh;LNSString;", "fillForeignRefreshMap", "LCoTouchlabSqueakyDaoSqueakyContext;LIOSClass;I", "LJavaSqlSQLException;", "LCoTouchlabSqueakyDaoSqueakyContext;[LCoTouchlabSqueakyFieldFieldType;I", "LCoTouchlabSqueakyDaoSqueakyContext;LCoTouchlabSqueakyFieldFieldType;I", "LCoTouchlabSqueakyDaoDaoHelper_ValBuilder;" };
  static const J2ObjcClassInfo _CoTouchlabSqueakyDaoDaoHelper = { "DaoHelper", "co.touchlab.squeaky.dao", ptrTable, methods, NULL, 7, 0x1, 7, 0, -1, 9, -1, -1, -1 };
  return &_CoTouchlabSqueakyDaoDaoHelper;
}

@end

void CoTouchlabSqueakyDaoDaoHelper_init(CoTouchlabSqueakyDaoDaoHelper *self) {
  NSObject_init(self);
}

CoTouchlabSqueakyDaoDaoHelper *new_CoTouchlabSqueakyDaoDaoHelper_init() {
  J2OBJC_NEW_IMPL(CoTouchlabSqueakyDaoDaoHelper, init)
}

CoTouchlabSqueakyDaoDaoHelper *create_CoTouchlabSqueakyDaoDaoHelper_init() {
  J2OBJC_CREATE_IMPL(CoTouchlabSqueakyDaoDaoHelper, init)
}

IOSObjectArray *CoTouchlabSqueakyDaoDaoHelper_refreshWithNSString_(NSString *refreshTree) {
  CoTouchlabSqueakyDaoDaoHelper_initialize();
  id<JavaUtilList> parsedFields = create_JavaUtilArrayList_init();
  jint bracketCount = 0;
  jint lastBreak = 0;
  for (jint i = 0; i < ((jint) [((NSString *) nil_chk(refreshTree)) length]); i++) {
    if (bracketCount == 0 && [refreshTree charAtWithInt:i] == ',') {
      NSString *fieldTree = [refreshTree java_substring:lastBreak endIndex:i];
      [parsedFields addWithId:[((NSString *) nil_chk(fieldTree)) java_trim]];
      lastBreak = i + 1;
    }
    else if ([refreshTree charAtWithInt:i] == '[') {
      bracketCount++;
    }
    else if ([refreshTree charAtWithInt:i] == ']') {
      bracketCount--;
    }
  }
  if (bracketCount != 0) @throw create_JavaLangRuntimeException_initWithNSString_(JreStrcat("$$", @"Bad refresh format ", refreshTree));
  [parsedFields addWithId:[((NSString *) nil_chk([refreshTree java_substring:lastBreak])) java_trim]];
  id<JavaUtilList> refreshs = create_JavaUtilArrayList_initWithInt_([parsedFields size]);
  for (NSString * __strong parsedField in parsedFields) {
    if ([((NSString *) nil_chk(parsedField)) java_contains:@"["]) {
      jint startIndex = [parsedField java_indexOf:'['];
      [refreshs addWithId:create_CoTouchlabSqueakyDaoDao_ForeignRefresh_initWithNSString_withCoTouchlabSqueakyDaoDao_ForeignRefreshArray_([parsedField java_substring:0 endIndex:startIndex], CoTouchlabSqueakyDaoDaoHelper_refreshWithNSString_([parsedField java_substring:startIndex + 1 endIndex:((jint) [parsedField length]) - 1]))];
    }
    else {
      [refreshs addWithId:create_CoTouchlabSqueakyDaoDao_ForeignRefresh_initWithNSString_(parsedField)];
    }
  }
  return [refreshs toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:[refreshs size] type:CoTouchlabSqueakyDaoDao_ForeignRefresh_class_()]];
}

CoTouchlabSqueakyDaoDaoHelper_ValBuilder *CoTouchlabSqueakyDaoDaoHelper_vals() {
  CoTouchlabSqueakyDaoDaoHelper_initialize();
  return create_CoTouchlabSqueakyDaoDaoHelper_ValBuilder_init();
}

CoTouchlabSqueakyDaoDao_ForeignRefresh *CoTouchlabSqueakyDaoDaoHelper_findRefreshWithCoTouchlabSqueakyDaoDao_ForeignRefreshArray_withNSString_(IOSObjectArray *foreignRefreshs, NSString *fieldName) {
  CoTouchlabSqueakyDaoDaoHelper_initialize();
  {
    IOSObjectArray *a__ = foreignRefreshs;
    CoTouchlabSqueakyDaoDao_ForeignRefresh * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    CoTouchlabSqueakyDaoDao_ForeignRefresh * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      CoTouchlabSqueakyDaoDao_ForeignRefresh *foreignRefresh = *b__++;
      if ([((NSString *) nil_chk(((CoTouchlabSqueakyDaoDao_ForeignRefresh *) nil_chk(foreignRefresh))->field_)) isEqual:fieldName]) return foreignRefresh;
    }
  }
  return nil;
}

IOSObjectArray *CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withIOSClass_withInt_(CoTouchlabSqueakyDaoSqueakyContext *squeakyContext, IOSClass *type, jint count) {
  CoTouchlabSqueakyDaoDaoHelper_initialize();
  IOSObjectArray *fieldTypes = [((CoTouchlabSqueakyTableTableInfo *) nil_chk([((id<CoTouchlabSqueakyTableGeneratedTableMapper>) nil_chk([((CoTouchlabSqueakyDaoSqueakyContext *) nil_chk(squeakyContext)) getGeneratedTableMapperWithIOSClass:type])) getTableConfig])) getFieldTypes];
  return CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldTypeArray_withInt_(squeakyContext, fieldTypes, count);
}

IOSObjectArray *CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldTypeArray_withInt_(CoTouchlabSqueakyDaoSqueakyContext *squeakyContext, IOSObjectArray *fieldTypes, jint count) {
  CoTouchlabSqueakyDaoDaoHelper_initialize();
  id<JavaUtilList> foreignRefreshs = create_JavaUtilArrayList_init();
  {
    IOSObjectArray *a__ = fieldTypes;
    CoTouchlabSqueakyFieldFieldType * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    CoTouchlabSqueakyFieldFieldType * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      CoTouchlabSqueakyFieldFieldType *fieldType = *b__++;
      if ([((CoTouchlabSqueakyFieldFieldType *) nil_chk(fieldType)) isForeign] && [fieldType isForeignAutoRefresh]) {
        [foreignRefreshs addWithId:create_CoTouchlabSqueakyDaoDao_ForeignRefresh_initWithNSString_withCoTouchlabSqueakyDaoDao_ForeignRefreshArray_([fieldType getFieldName], CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldType_withInt_(squeakyContext, fieldType, count - 1))];
      }
    }
  }
  return [foreignRefreshs size] == 0 ? nil : [foreignRefreshs toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:[foreignRefreshs size] type:CoTouchlabSqueakyDaoDao_ForeignRefresh_class_()]];
}

IOSObjectArray *CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldType_withInt_(CoTouchlabSqueakyDaoSqueakyContext *squeakyContext, CoTouchlabSqueakyFieldFieldType *parentType, jint count) {
  CoTouchlabSqueakyDaoDaoHelper_initialize();
  if (count == 0) return nil;
  IOSObjectArray *fieldTypes = [((CoTouchlabSqueakyTableTableInfo *) nil_chk([((id<CoTouchlabSqueakyTableGeneratedTableMapper>) nil_chk([((CoTouchlabSqueakyDaoSqueakyContext *) nil_chk(squeakyContext)) getGeneratedTableMapperWithIOSClass:[((CoTouchlabSqueakyFieldFieldType *) nil_chk(parentType)) getFieldType]])) getTableConfig])) getFieldTypes];
  return CoTouchlabSqueakyDaoDaoHelper_fillForeignRefreshMapWithCoTouchlabSqueakyDaoSqueakyContext_withCoTouchlabSqueakyFieldFieldTypeArray_withInt_(squeakyContext, fieldTypes, count);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CoTouchlabSqueakyDaoDaoHelper)

@implementation CoTouchlabSqueakyDaoDaoHelper_ValBuilder

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  CoTouchlabSqueakyDaoDaoHelper_ValBuilder_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (CoTouchlabSqueakyDaoDaoHelper_ValBuilder *)addWithNSString:(NSString *)col
                                                       withId:(id)val {
  [((id<JavaUtilMap>) nil_chk(vals_)) putWithId:col withId:val];
  return self;
}

- (id<JavaUtilMap>)build {
  return vals_;
}

- (void)dealloc {
  RELEASE_(vals_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LCoTouchlabSqueakyDaoDaoHelper_ValBuilder;", 0x1, 0, 1, -1, -1, -1, -1 },
    { NULL, "LJavaUtilMap;", 0x1, -1, -1, -1, 2, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(addWithNSString:withId:);
  methods[2].selector = @selector(build);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "vals_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x0, -1, -1, 3, -1 },
  };
  static const void *ptrTable[] = { "add", "LNSString;LNSObject;", "()Ljava/util/Map<Ljava/lang/String;Ljava/lang/Object;>;", "Ljava/util/Map<Ljava/lang/String;Ljava/lang/Object;>;", "LCoTouchlabSqueakyDaoDaoHelper;" };
  static const J2ObjcClassInfo _CoTouchlabSqueakyDaoDaoHelper_ValBuilder = { "ValBuilder", "co.touchlab.squeaky.dao", ptrTable, methods, fields, 7, 0x9, 3, 1, 4, -1, -1, -1, -1 };
  return &_CoTouchlabSqueakyDaoDaoHelper_ValBuilder;
}

@end

void CoTouchlabSqueakyDaoDaoHelper_ValBuilder_init(CoTouchlabSqueakyDaoDaoHelper_ValBuilder *self) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->vals_, new_JavaUtilHashMap_init());
}

CoTouchlabSqueakyDaoDaoHelper_ValBuilder *new_CoTouchlabSqueakyDaoDaoHelper_ValBuilder_init() {
  J2OBJC_NEW_IMPL(CoTouchlabSqueakyDaoDaoHelper_ValBuilder, init)
}

CoTouchlabSqueakyDaoDaoHelper_ValBuilder *create_CoTouchlabSqueakyDaoDaoHelper_ValBuilder_init() {
  J2OBJC_CREATE_IMPL(CoTouchlabSqueakyDaoDaoHelper_ValBuilder, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CoTouchlabSqueakyDaoDaoHelper_ValBuilder)
